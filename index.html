<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>Basic 훈련 템플릿</title>
  <style>
    body { font-family: sans-serif; margin: 40px; }
    input, select { margin: 5px; width: 100px; }
    button { margin-top: 15px; }
    pre { background: #f8f8f8; padding: 15px; border-radius: 10px; white-space: pre-wrap; }
    .section { margin-top: 30px; padding: 10px; border: 1px solid #ccc; border-radius: 8px; }
  </style>
</head>
<body>
  <h2>Basic 훈련 템플릿</h2>

  <label>체중 (kg): <input type="number" id="bodyweight" /></label><br />
  <label>Bench Press 1RM (kg): <input type="number" id="bp" /></label><br />
  <label>OHP 1RM (kg): <input type="number" id="ohp" /></label><br />
  <label>Squat 1RM (kg): <input type="number" id="squat" /></label><br />
  <label>Deadlift 1RM (kg): <input type="number" id="deadlift" /></label><br />

  <div class="section">
    <h3>보조운동 설정</h3>
    <label>1. 당신은 Pull-up을 6회 이상 할 수 있습니까?</label><br />
    <label><input type="radio" name="pullup" value="yes"> 예 (Y)</label>
    <label><input type="radio" name="pullup" value="no"> 아니오 (N)</label>
  </div>

  <button onclick="generate()">루틴 생성</button>

  <h3>주간 루틴:</h3>
  <pre id="output"></pre>

  <script>
    function roundToHalf(num) {
      return Math.round(num * 2) / 2;
    }

    function generate() {
      const bodyweight = parseFloat(document.getElementById("bodyweight").value);
      const bp = parseFloat(document.getElementById("bp").value);
      const ohp = parseFloat(document.getElementById("ohp").value);
      const squat = parseFloat(document.getElementById("squat").value);
      const deadlift = parseFloat(document.getElementById("deadlift").value);
      const pullupAnswer = document.querySelector('input[name="pullup"]:checked');

      if ([bp, ohp, squat, deadlift, bodyweight].some(v => isNaN(v))) {
        document.getElementById("output").textContent = "모든 1RM과 체중을 입력하세요.";
        return;
      }

      if (!pullupAnswer) {
        document.getElementById("output").textContent = "보조운동 질문에 답해주세요.";
        return;
      }

      const bp_mon = roundToHalf(bp * 0.8);
      const bp_thu = roundToHalf(bp * 0.87);
      const ohp_mon = roundToHalf(ohp * 0.65);
      const ohp_thu = roundToHalf(ohp_mon + 2);

      const squat_tue = roundToHalf(squat * 0.8);
      const squat_fri = roundToHalf(squat * 0.87);

      const pausedl = roundToHalf(deadlift * 0.7);
      const deadlift_fri = roundToHalf(deadlift * 0.825);

      // 보조운동 설정
      let pullMon = "";
      let pullThu = "";
      const accessoryWeight = roundToHalf(bodyweight * 0.4);

      if (pullupAnswer.value === "yes") {
        pullMon = "Pull-up: 4x5–10";
        pullThu = "Pull-up: 4x5–10";
      } else {
        const alt = Math.random() < 0.5 ? `Machine Pull-down: 3x12 @ ${accessoryWeight}kg`
                                       : `T-Bar Row: 3x10 @ ${accessoryWeight}kg`;
        pullMon = alt;
        pullThu = alt;
      }

      const result = `
월요일:
BP: 3x5 @ ${bp_mon}kg
OHP: 3x8 @ ${ohp_mon}kg
${pullMon}

화요일:
Squat: 5x5 @ ${squat_tue}kg
Pause DL: 3x4 @ ${pausedl}kg

목요일:
BP: 3x3 or 2 @ ${bp_thu}kg
OHP: 3x8 @ ${ohp_thu}kg
${pullThu}

금요일:
Squat: 3x3 or 2 @ ${squat_fri}kg
Deadlift: 3x5 @ ${deadlift_fri}kg
`;

      document.getElementById("output").textContent = result.trim();
    }
  </script>
</body>
</html>

